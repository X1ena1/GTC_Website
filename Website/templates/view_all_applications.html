<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>View All Rebate Applications</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}"> 
    <link rel="stylesheet" href="{{ url_for('static', filename='css/contractor.css') }}"> 
</head>
<body>
    
    <header class="main-header">
        <div class="logo">
            <img src="{{ url_for('static', filename='img/uh-logo.png') }}" alt="UH Logo">
            <h1>Energy Incentive Application System</h1>
        </div>
        <nav class="user-nav">
            <a href="{{ url_for('contractor_dashboard') }}">Home</a>
            <a href="{{ url_for('logout') }}">Logout</a>
        </nav>
    </header>

    <main class="content-area">
        <section class="dashboard-section">
            <h2 class="section-title">Applications </h2>
            <p class="section-description">A comprehensive list of all submitted energy incentive applications (rebates).</p>

            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>SOP Number</th>
                            <th>Category</th>
                            <th>Status</th>
                            <th>Building</th>
                            <th>Submission Date</th>
                            <th>Department ID</th>
                            <th>Sponsor ID</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for app in applications %} 
                        <tr>
                            <td>{{ app.SOP_Number }}</td>
                            <td>{{ app.Category }}</td>
                            <td>{{ app.Status }}</td>
                            <td>{{ app.Building }}</td>
                            <td>{{ app.Submission_Date }}</td>
                            <td>{{ app.Department_ID }}</td>
                            <td>{{ app.Sponsor_ID }}</td>
                            <td>
                                <a href="{{ url_for('review_application', application_id=app.SOP_Number) }}" 
                                   class="action-small-btn view-btn">
                                    View Details
                                </a>
                                </td>
                        </tr>
                        {% else %}
                        <tr>
                            <td colspan="8" class="no-data">No rebate application data found in the database.</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            
            <a href="{{ url_for('contractor_dashboard') }}" class="back-link">
                &larr; Back to Dashboard
            </a>

        </section>
    </main>

    </body>
</html>